import numpy as np
import scipy
import matplotlib.pyplot as plt
import sys
from matplotlib import rc
from matplotlib.ticker import FormatStrFormatter
from pytictoc import TicToc
from strawberryfields.decompositions_new import rectangular_symmetric

sys.path.append('../')
from convert_decomposition import strawberryfields_to_neuroptica_clements
from metrics import fidelity

sys.path.append('../../')
from neuroptica.layers_new import ClementsLayer
from neuroptica.component_layers_new import MZIDelayLayer, PhaseShifterLayer

def main():
    #Data from Quix paper '20-Mode Universal Quantum Photonic Processor'
    data = np.array([[-0.29458882658036084, 0.9702553967178373],
            [-0.27733662625986544, 0.9873012256779797],
            [-0.2621540723629875, 0.9848862208340009],
            [-0.24539279248272455, 0.9995548865215051],
            [-0.22918767313019117, 1.0133414053114405],
            [-0.21889142623868368, 0.9951547585995847],
            [-0.20683374754817518, 1.012271902571506],
            [-0.19819950771465245, 0.9868361724086847],
            [-0.1876634396913482, 1.0176229942209427],
            [-0.18222428074372748, 0.9573072433250468],
            [-0.16841106859087973, 0.9572171675016812],
            [-0.15762689289866866, 0.9050746288290268],
            [-0.14273741211761137, 0.8882961786423287],
            [-0.14144212210895185, 0.8164827169523481],
            [-0.12763830058955022, 0.8027866060616365],
            [-0.12466117078292077, 0.7389961526728791],
            [-0.11287619744931676, 0.6643732483795548],
            [-0.1008119916466787, 0.5893536723073366],
            [-0.0885990046498884, 0.4906584541049006],
            [-0.07773636669052258, 0.3984248380651477],
            [-0.0674240489891399, 0.318474480376583],
            [-0.05762436446740582, 0.2379073590620191],
            [-0.046502681601003404, 0.16148592311256715],
            [-0.033220528248305625, 0.0870500933496694],
            [-0.01852306450633545, 0.04398663390583635],
            [-0.0005318199168881099, 0.030462129099991353],
            [0.017484655910106006, 0.04103989201362479],
            [0.031610565002369306, 0.08427395112659641],
            [0.04667888142420923, 0.1659319225268039],
            [0.05896270199721304, 0.24978196759153248],
            [0.07155557066103674, 0.34143923233471296],
            [0.0814016065540562, 0.43369210053215324],
            [0.0919757598400302, 0.5140343856932149],
            [0.10141634513331227, 0.5977085586840986],
            [0.11244689238300226, 0.6846659291394187],
            [0.12065179387482367, 0.7590421056455765],
            [0.1350107615891129, 0.8253615780738551],
            [0.15121277129892768, 0.8908434623660358],
            [0.16696026659151258, 0.9551539956543548],
            [0.1832039043336629, 0.9762095187707227],
            [0.20001191694307746, 0.9868950613133867],
            [0.21611325428236589, 1.011830881736606],
            [0.23311066976219103, 0.9895081632912301],
            [0.24975585173444764, 0.9837026525920453],
            [0.26608306437327806, 0.9789876979768176],
            [0.28284903364090125, 0.9762766215134565],
            [0.2941338509989096, 0.9779892145324707]])

    data = data.T
    np.savetxt('quix_data.txt',data)

if __name__ == '__main__':
    main()
